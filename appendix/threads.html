<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="UTF-8" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Threads · GitBook</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="" />
    <meta name="generator" content="GitBook 3.2.3" />

    <link rel="stylesheet" href="../gitbook/style.css" />

    <link
      rel="stylesheet"
      href="../gitbook/gitbook-plugin-highlight/website.css"
    />

    <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css" />

    <link
      rel="stylesheet"
      href="../gitbook/gitbook-plugin-fontsettings/website.css"
    />

    <meta name="HandheldFriendly" content="true" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link
      rel="apple-touch-icon-precomposed"
      sizes="152x152"
      href="../gitbook/images/apple-touch-icon-precomposed-152.png"
    />
    <link
      rel="shortcut icon"
      href="../gitbook/images/favicon.ico"
      type="image/x-icon"
    />

    <link rel="next" href="synchronization.html" />

    <link rel="prev" href="../project4/FAQ.html" />
  </head>
  <body>
    <div class="book">
      <div class="book-summary">
        <div id="book-search-input" role="search">
          <input type="text" placeholder="Type to search" />
        </div>

        <nav role="navigation">
          <ul class="summary">
            <li class="header">Introduction</li>

            <li class="chapter" data-level="1.1" data-path="../">
              <a href="../"> Introduction </a>
            </li>

            <li
              class="chapter"
              data-level="1.2"
              data-path="../introduction/getting_started.html"
            >
              <a href="../introduction/getting_started.html">
                Getting Started
              </a>
            </li>

            <li
              class="chapter"
              data-level="1.3"
              data-path="../introduction/grading.html"
            >
              <a href="../introduction/grading.html"> Grading </a>
            </li>

            <li
              class="chapter"
              data-level="1.4"
              data-path="../introduction/legal_and_ethical_issues.html"
            >
              <a href="../introduction/legal_and_ethical_issues.html">
                Legal and Ethical Issues
              </a>
            </li>

            <li class="header">Project1: Threads</li>

            <li
              class="chapter"
              data-level="2.1"
              data-path="../project1/introduction.html"
            >
              <a href="../project1/introduction.html"> Introduction </a>
            </li>

            <li
              class="chapter"
              data-level="2.2"
              data-path="../project1/alarm_clock.html"
            >
              <a href="../project1/alarm_clock.html"> Alarm Clock </a>
            </li>

            <li
              class="chapter"
              data-level="2.3"
              data-path="../project1/priority_scheduling.html"
            >
              <a href="../project1/priority_scheduling.html">
                Priority Scheduling
              </a>
            </li>

            <li
              class="chapter"
              data-level="2.4"
              data-path="../project1/advanced_scheduler.html"
            >
              <a href="../project1/advanced_scheduler.html">
                Advanced Scheduler
              </a>
            </li>

            <li
              class="chapter"
              data-level="2.5"
              data-path="../project1/FAQ.html"
            >
              <a href="../project1/FAQ.html"> FAQ </a>
            </li>

            <li class="header">Project2: User Programs</li>

            <li
              class="chapter"
              data-level="3.1"
              data-path="../project2/introduction.html"
            >
              <a href="../project2/introduction.html"> Introduction </a>
            </li>

            <li
              class="chapter"
              data-level="3.2"
              data-path="../project2/argument_passing.html"
            >
              <a href="../project2/argument_passing.html"> Argument Passing </a>
            </li>

            <li
              class="chapter"
              data-level="3.3"
              data-path="../project2/user_memory.html"
            >
              <a href="../project2/user_memory.html"> User Memory </a>
            </li>

            <li
              class="chapter"
              data-level="3.4"
              data-path="../project2/system_call.html"
            >
              <a href="../project2/system_call.html"> System Calls </a>
            </li>

            <li
              class="chapter"
              data-level="3.5"
              data-path="../project2/process_termination.html"
            >
              <a href="../project2/process_termination.html">
                Process Termination Messages
              </a>
            </li>

            <li
              class="chapter"
              data-level="3.6"
              data-path="../project2/deny_write.html"
            >
              <a href="../project2/deny_write.html">
                Denying Writes to Executables
              </a>
            </li>

            <li
              class="chapter"
              data-level="3.7"
              data-path="../project2/dup.html"
            >
              <a href="../project2/dup.html">
                Extend File Descriptor (Extra)
              </a>
            </li>

            <li
              class="chapter"
              data-level="3.8"
              data-path="../project2/FAQ.html"
            >
              <a href="../project2/FAQ.html"> FAQ </a>
            </li>

            <li class="header">Project3: Virtual Memory</li>

            <li
              class="chapter"
              data-level="4.1"
              data-path="../project3/introduction.html"
            >
              <a href="../project3/introduction.html"> Introduction </a>
            </li>

            <li
              class="chapter"
              data-level="4.2"
              data-path="../project3/vm_management.html"
            >
              <a href="../project3/vm_management.html"> Memory Management </a>
            </li>

            <li
              class="chapter"
              data-level="4.3"
              data-path="../project3/anon.html"
            >
              <a href="../project3/anon.html"> Anonymous Page </a>
            </li>

            <li
              class="chapter"
              data-level="4.4"
              data-path="../project3/stack_growth.html"
            >
              <a href="../project3/stack_growth.html"> Stack Growth </a>
            </li>

            <li
              class="chapter"
              data-level="4.5"
              data-path="../project3/memory_mapped_files.html"
            >
              <a href="../project3/memory_mapped_files.html">
                Memory Mapped Files
              </a>
            </li>

            <li
              class="chapter"
              data-level="4.6"
              data-path="../project3/swapping.html"
            >
              <a href="../project3/swapping.html"> Swap In/Out </a>
            </li>

            <li
              class="chapter"
              data-level="4.7"
              data-path="../project3/cow.html"
            >
              <a href="../project3/cow.html"> Copy-on-Write (Extra) </a>
            </li>

            <li
              class="chapter"
              data-level="4.8"
              data-path="../project3/FAQ.html"
            >
              <a href="../project3/FAQ.html"> FAQ </a>
            </li>

            <li class="header">Project4: File System</li>

            <li
              class="chapter"
              data-level="5.1"
              data-path="../project4/introduction.html"
            >
              <a href="../project4/introduction.html"> Introduction </a>
            </li>

            <li
              class="chapter"
              data-level="5.2"
              data-path="../project4/indexed_and_extensible_files.html"
            >
              <a href="../project4/indexed_and_extensible_files.html">
                Indexed and Extensible Files
              </a>
            </li>

            <li
              class="chapter"
              data-level="5.3"
              data-path="../project4/subdirectories.html"
            >
              <a href="../project4/subdirectories.html">
                Subdirectories and Soft Links
              </a>
            </li>

            <li
              class="chapter"
              data-level="5.4"
              data-path="../project4/buffer_cache.html"
            >
              <a href="../project4/buffer_cache.html"> Buffer Cache (Extra) </a>
            </li>

            <li
              class="chapter"
              data-level="5.5"
              data-path="../project4/synchronization.html"
            >
              <a href="../project4/synchronization.html"> Synchronization </a>
            </li>

            <li
              class="chapter"
              data-level="5.6"
              data-path="../project4/FAQ.html"
            >
              <a href="../project4/FAQ.html"> FAQ </a>
            </li>

            <li class="header">Appendix</li>

            <li
              class="chapter active"
              data-level="6.1"
              data-path="threads.html"
            >
              <a href="threads.html"> Threads </a>
            </li>

            <li
              class="chapter"
              data-level="6.2"
              data-path="synchronization.html"
            >
              <a href="synchronization.html"> Synchronization </a>
            </li>

            <li
              class="chapter"
              data-level="6.3"
              data-path="memory_allocation.html"
            >
              <a href="memory_allocation.html"> Memory Allocation </a>
            </li>

            <li
              class="chapter"
              data-level="6.4"
              data-path="virtual_address.html"
            >
              <a href="virtual_address.html"> Virtual Address </a>
            </li>

            <li class="chapter" data-level="6.5" data-path="page_table.html">
              <a href="page_table.html"> Page Table </a>
            </li>

            <li
              class="chapter"
              data-level="6.6"
              data-path="debugging_tools.html"
            >
              <a href="debugging_tools.html"> Debugging Tools </a>
            </li>

            <li
              class="chapter"
              data-level="6.7"
              data-path="development_tools.html"
            >
              <a href="development_tools.html"> Development Tools </a>
            </li>

            <li class="chapter" data-level="6.8" data-path="hash_table.html">
              <a href="hash_table.html"> Hash Table </a>
            </li>

            <li class="divider"></li>

            <li>
              <a
                href="https://www.gitbook.com"
                target="blank"
                class="gitbook-link"
              >
                Published with GitBook
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <div class="book-body">
        <div class="body-inner">
          <div class="book-header" role="navigation">
            <!-- Title -->
            <h1>
              <i class="fa fa-circle-o-notch fa-spin"></i>
              <a href="..">Threads</a>
            </h1>
          </div>

          <div class="page-wrapper" tabindex="-1" role="main">
            <div class="page-inner">
              <div id="book-search-results">
                <div class="search-noresults">
                  <section class="normal markdown-section">
                    <h1 id="threads">Threads(스레드)</h1>
                    <div>
                      <h2>요약</h2>
                      <p>
                        PintOS에서 스레드를 구현하고 관리하는 데 필요한 핵심
                        개념은 <code>struct thread</code>입니다. 이 구조체는
                        스레드나 사용자 프로세스를 나타내며, 스레드의 스택,
                        상태, 우선순위 등 여러 중요한 정보를 포함합니다.
                      </p>
                      <h3><code>struct thread</code></h3>
                      <ul>
                        <li>
                          <b>메모리 구성</b>: 각 <code>struct thread</code>는
                          메모리의 한 페이지의 시작 부분을 차지합니다. 페이지의
                          나머지 부분은 커널 스택으로 사용되며, 스택은 페이지의
                          끝에서 아래로 성장합니다.
                        </li>
                        <li>
                          <b>주요 구성요소</b>
                          <ul>
                            <li>
                              <b>tid</b>: 스레드 식별자로, 커널 전체에서 유일한
                              값을 가집니다.
                            </li>
                            <li>
                              <b>status</b>: 스레드의 현재 상태를 나타냅니다.
                              (<code>THREAD_RUNNING</code>,
                              <code>THREAD_READY</code>,
                              <code>THREAD_BLOCKED</code>,
                              <code>THREAD_DYING</code> 중 하나)
                            </li>
                            <li><b>name</b>: 스레드의 이름을 저장합니다.</li>
                            <li>
                              <b>priority</b>: 스레드의 우선순위를 나타내며,
                              <code>PRI_MIN</code>에서
                              <code>PRI_MAX</code> 사이의 값을 가집니다.
                            </li>
                            <li>
                              <b>magic</b>: 스택 오버플로우 감지를 위한
                              값입니다.
                            </li>
                          </ul>
                        </li>
                      </ul>
                      <h3>스레드 관련 주요 함수</h3>
                      <ul>
                        <li>
                          <b>thread_init()</b>: 스레드 시스템을 초기화합니다.
                        </li>
                        <li>
                          <b>thread_create()</b>: 새로운 스레드를 생성하고
                          시작합니다.
                        </li>
                        <li>
                          <b>thread_block()</b> / <b>thread_unblock()</b>:
                          스레드를 차단 상태로 전환하거나 차단 해제합니다.
                        </li>
                        <li>
                          <b>thread_current()</b>: 현재 실행 중인 스레드를
                          반환합니다.
                        </li>
                        <li><b>thread_exit()</b>: 현재 스레드를 종료합니다.</li>
                        <li>
                          <b>thread_yield()</b>: CPU를 양보하고 스케줄러가 새
                          스레드를 선택하도록 합니다.
                        </li>
                      </ul>
                      <h3>동기화</h3>
                      <p>
                        동기화는 스레드가 공유 자원을 안전하게 사용할 수 있도록
                        돕습니다. 인터럽트를 비활성화하는 것은 가장 기본적인
                        동기화 방법이지만, 주로 커널 스레드와 외부 인터럽트
                        핸들러 간 동기화에 사용됩니다. PintOS는 또한 세마포어와
                        락을 포함한 다양한 동기화 원시를 제공하여, 스레드 간의
                        자원 접근을 안전하게 관리할 수 있도록 합니다.
                      </p>
                      <h3>구현 시 고려사항</h3>
                      <ul>
                        <li>
                          <code>struct thread</code>의 크기는 커널 스택에 충분한
                          공간을 남겨두기 위해 1kB 미만으로 유지되어야 합니다.
                        </li>
                        <li>
                          커널 함수는 큰 구조체나 배열을 비정적 지역 변수로
                          할당해서는 안 됩니다. 대신 동적 할당을 사용해야
                          합니다.
                        </li>
                      </ul>
                      <p>
                        이 정보는 PintOS에서 스레드를 구현하고 관리하는 데 있어
                        기본적인 출발점을 제공합니다. 스레드의 생명주기 관리,
                        우선순위 스케줄링 구현, 그리고 안전한 자원 공유를 위한
                        동기화 메커니즘 구현 등을 통해 운영체제의 핵심적인
                        부분을 이해하고 개발할 수 있습니다.
                      </p>
                    </div>
                    <h2>본문</h2>
                    <h2 id="struct-thread"><code>struct thread</code></h2>
                    <p>
                      스레드에 대한 주요 핀토스 데이터 구조체는
                      <code>thread/thread.h</code>에 선언된
                      <code>struct thread</code>입니다.
                    </p>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">struct</span> thread;
</code></pre>
                    <p>
                      스레드 또는 사용자 프로세스를 나타냅니다. 프로젝트에서
                      <code>struct thread</code>에 멤버를 직접 추가해야 합니다.
                      기존 멤버의 정의를 변경하거나 삭제할 수도 있습니다. 모든
                      <code>struct thread</code>는 자체 메모리 페이지의 시작
                      부분을 차지합니다. 나머지 페이지는 스레드의 스택에
                      사용되며, 스택은 페이지의 끝에서 아래쪽으로 늘어납니다.
                      다음과 같이 보입니다:
                    </p>
                    <pre><code>                      4 kB +---------------------------------+
                           |           커널 스택             |
                           |               |                 |
                           |               |                 |
                           |               V                 |
                           |         아래쪽으로 성장         |
                           |                                 |
                           |                                 |
                           |                                 |
                           |                                 |
                           |                                 |
                           |                                 |
                           |                                 |
                           |                                 |
    sizeof (struct thread) +---------------------------------+
                           |             magic               |
                           |          intr_frame             |
                           |               :                 |
                           |               :                 |
                           |         상태(status)            |
                           |       스레드 식별자(tid)        |
                      0 kB +---------------------------------+
</code></pre>
                    <p>
                      이는 두 가지 결과를 초래합니다. 첫째,
                      <code>struct thread</code>가 너무 커지지 않도록 해야
                      합니다. 그렇게 되면 커널 스택을 위한 공간이 충분하지 않게
                      됩니다. 기본 <code>struct thread</code>의 크기는 몇
                      바이트에 불과합니다. 아마도 1KB 미만으로 유지되어야 할
                      것입니다. 둘째, 커널 스택이 너무 커지지 않도록 해야
                      합니다. 스택이 오버플로되면 스레드 상태가 손상됩니다.
                      따라서 커널 함수는 큰 구조체나 배열을 정적이 아닌 지역
                      변수로 할당해서는 안 됩니다. 대신
                      <code>malloc()</code> 또는
                      <code>palloc_get_page()</code>와 함께 동적 할당을
                      사용하세요(<a href="./memory_allocation.html">할당</a>
                      참조).
                    </p>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">tid_t</span> tid;
</code></pre>
                    <blockquote>
                      <p>
                        스레드의 스레드 식별자 또는 tid. 모든 스레드에는 커널의
                        전체 수명에 걸쳐 고유한 tid가 있어야 합니다. 기본적으로
                        <code>tid_t</code>는 <code>int</code>에 대한
                        <code>typedef</code>이며 각 새 스레드는 초기 프로세스의
                        경우 1부터 시작하여 숫자적으로 다음 높은 tid를 받습니다.
                        원하는 경우 유형과 번호 체계를 변경할 수 있습니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">enum</span> thread_status status;
</code></pre>
                    <blockquote>
                      <p>스레드의 상태, 다음 중 하나입니다.</p>
                      <ul>
                        <li>
                          <p><code>THREAD_RUNNING</code></p>
                          <p>
                            스레드가 실행 중입니다. 주어진 시간에 정확히 하나의
                            스레드가 실행 중입니다.
                            <code>thread_current()</code>는 실행 중인 스레드를
                            반환합니다.
                          </p>
                        </li>
                        <li>
                          <p><code>THREAD_READY</code></p>
                          <p>
                            스레드를 실행할 준비가 되었지만 지금은 실행되지
                            않습니다. 이 스레드는 다음에 스케줄러가 호출될 때
                            실행되도록 선택될 수 있습니다. 준비된 스레드는
                            <code>ready_list</code>라는 이중 연결 리스트에
                            보관됩니다.
                          </p>
                        </li>
                        <li>
                          <p><code>THREAD_BLOCKED</code></p>
                          <p>
                            스레드가 잠금을 사용할 수 있게 되거나 인터럽트가
                            호출되는 등 무언가를 기다리고 있습니다. 스레드는
                            <code>thread_unblock()</code> 호출을 통해
                            <code>THREAD_READY</code> 상태로 전환될 때까지 다시
                            스케줄링되지 않습니다. 이 작업은 스레드를 자동으로
                            차단 및 차단 해제하는 핀토스 동기화 프리미티브 중
                            하나를 사용하여 간접적으로 수행하는 것이 가장
                            편리합니다(<a href="./synchronization.html"
                              >동기화</a
                            >
                            참조). 차단된 스레드가 무엇을 기다리고 있는지 알 수
                            있는 선험적인 방법은 없지만 백트레이스가 도움이 될
                            수 있습니다(<a
                              href="./debugging_tools.html#Backtraces"
                              >백트레이스</a
                            >
                            참조).
                          </p>
                        </li>
                        <li>
                          <p><code>THREAD_DYING</code></p>
                          <p>
                            스레드는 다음 스레드로 전환된 후 스케줄러에 의해
                            삭제됩니다.
                          </p>
                        </li>
                      </ul>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">char</span> name[<span class="hljs-number">16</span>];
</code></pre>
                    <blockquote>
                      <p>스레드 이름 또는 적어도 처음 몇 자의 문자열입니다.</p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">struct</span> intr_frame tf;
</code></pre>
                    <blockquote>
                      <p>
                        레지스터와 스택 포인터를 포함한 컨텍스트 전환을 위한
                        정보를 저장합니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">int</span> priority;
</code></pre>
                    <blockquote>
                      <p>
                        스레드 우선순위는 <code>PRI_MIN</code>(0)에서
                        <code>PRI_MAX</code>(63)까지의 범위입니다. 숫자가
                        낮을수록 우선순위가 낮으므로 우선순위 0은 가장 낮은
                        우선순위이고 우선순위 63은 가장 높은 우선순위입니다.
                        제공된 핀토스는 스레드 우선순위를 무시하지만 프로젝트
                        1에서 우선순위 스케줄링을 구현하게 됩니다(<a
                          href="~/project1/priority_scheduling.html"
                          >우선순위 스케줄링</a
                        >
                        참조).
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">struct</span> list_elem elem;
</code></pre>
                    <blockquote>
                      <p>
                        스레드를 이중으로 연결된 목록에 넣는 데 사용되는 "목록
                        요소"로, <code>ready_list</code>(실행할 준비가 된 스레드
                        목록) 또는 <code>sema_down()</code>의 세마포어에서 대기
                        중인 스레드 목록 중 하나입니다. 세마포어에서 대기 중인
                        스레드가 준비되지 않았거나 그 반대의 경우도 마찬가지이기
                        때문에 이중 작업을 수행할 수 있습니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">uint64_t</span> *pml4;
</code></pre>
                    <blockquote>
                      <p>
                        프로젝트 2 이상에만 존재합니다.
                        <a href="./virtual_address.html">페이지 테이블</a>을
                        참조하세요.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">unsigned</span> magic
</code></pre>
                    <blockquote>
                      <p>
                        <code>thread_current()</code>는 실행 중인 스레드의
                        <code>struct thread</code>의 <code>magic</code> 멤버가
                        <code>THREAD_MAGIC</code>으로 설정되어 있는지
                        확인합니다. 스레드 오버플로를 감지하는 데 사용되는
                        <code>thread/thread.c</code>에 정의된 임의의 숫자이며
                        항상 <code>THREAD_MAGIC</code>으로 설정됩니다. 스택
                        오버플로는 이 값을 변경하여 어설션을 트리거하는 경향이
                        있습니다. 가장 큰 이점을 얻으려면
                        <code>struct thread</code>에 멤버를 추가할 때 마지막에
                        <code>magic</code> 멤버를 남겨두세요.
                      </p>
                    </blockquote>
                    <h2 id="thread-functions">Thread Functions(스레드 함수)</h2>
                    <p>
                      <code>threads/thread.c</code>는 스레드 지원을 위한 몇 가지
                      공용 함수를 구현합니다. 가장 유용한 함수를 살펴보겠습니다.
                    </p>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_init</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
                    <blockquote>
                      <p>
                        <code>main()</code>이 호출하여 스레드 시스템을
                        초기화합니다. 주요 목적은 핀토스의 초기 스레드를 위한
                        <code>struct thread</code>를 생성하는 것입니다. 이는
                        핀토스 로더가 초기 스레드의 스택을 다른 핀토스 스레드와
                        같은 위치인 페이지 상단에 배치하기 때문에 가능합니다.
                      </p>
                      <p>
                        <code>thread_init()</code>이 실행되기 전에는 실행 중인
                        스레드의 <code>magic</code> 값이 올바르지 않기 때문에
                        <code>thread_current()</code>가 실패합니다. 락 잠금을
                        위한 <code>lock_acquire()</code>를 포함해 많은 함수가
                        <code>thread_current()</code>를 직간접적으로 호출하므로
                        핀토스 초기화 초기에 <code>thread_init()</code>이
                        호출됩니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_start</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
                    <blockquote>
                      <p>
                        <code>main()</code>이 스케줄러를 시작하기 위해
                        호출합니다. 유휴 스레드, 즉 다른 스레드가 준비되지
                        않았을 때 스케줄링되는 스레드를 생성합니다. 그런 다음
                        인터럽트를 활성화하고, 부수적으로 타이머 인터럽트에서
                        돌아올 때 스케줄러가
                        <code>intr_yield_on_return()</code>을 사용하여
                        실행되므로 스케줄러가 활성화됩니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_tick</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
                    <blockquote>
                      <p>
                        각 타이머 틱마다 타이머 인터럽트에 의해 호출됩니다.
                        스레드 통계를 추적하고 타임 슬라이스가 만료되면
                        스케줄러를 트리거합니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_print_stats</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
                    <blockquote>
                      <p>핀토스 종료 시 호출되어 스레드 통계를 인쇄합니다.</p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">tid_t</span> thread_create (<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *name, <span class="hljs-keyword">int</span> priority, thread func *func, <span class="hljs-keyword">void</span> *aux);
</code></pre>
                    <blockquote>
                      <p>
                        주어진 우선순위를 가진 <code>name</code>이라는 새
                        스레드를 생성하고 시작하여 새 스레드의 tid를 반환합니다.
                        이 스레드는 함수의 단일 인수로 <code>aux</code>를
                        전달하여 <code>func</code>를 실행합니다.
                      </p>
                      <p>
                        <code>thread_create()</code>는 스레드의
                        <code>struct thread</code>와 스택을 위한 페이지를
                        할당하고 그 멤버를 초기화한 다음 가짜 스택 프레임 세트를
                        설정합니다. 스레드는 차단된 상태로 초기화되었다가 반환
                        직전에 차단이 해제되어 새 스레드가 예약될 수 있습니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_func</span> <span class="hljs-params">(<span class="hljs-keyword">void</span> *aux)</span></span>;
</code></pre>
                    <blockquote>
                      <p>
                        이것은 <code>thread_create()</code>에 전달되는 함수의
                        유형이며, 보조 인수가 함수의 인수로 함께 전달됩니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_block</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
                    <blockquote>
                      <p>
                        실행 중인 스레드를 실행 중인 상태에서 차단된 상태로
                        전환합니다. 스레드는 <code>thread_unblock()</code>이
                        호출될 때까지 다시 실행되지 않으므로 이를 위한 어떤
                        방법을 마련하는 것이 좋습니다.
                        <code>thread_block()</code>은 매우 낮은 수준이므로 대신
                        동기화 프리미티브 중 하나를 사용하는 것이 좋습니다(<a
                          href="./synchronization.html"
                          >동기화</a
                        >
                        참조).
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_unblock</span> <span class="hljs-params">(<span class="hljs-keyword">struct</span> thread *thread)</span></span>;
</code></pre>
                    <blockquote>
                      <p>
                        차단된 상태여야 하는 스레드를 준비 상태로 전환하여
                        실행을 재개할 수 있도록 합니다. 이 함수는 스레드가 대기
                        중인 이벤트가 발생할 때 호출됩니다(예: 스레드가 대기
                        중인 잠금을 사용할 수 있게 되는 경우).
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">struct</span> thread *<span class="hljs-title">thread_current</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
                    <blockquote>
                      <p>실행 중인 스레드를 반환합니다.</p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-keyword">tid_t</span> thread_tid (<span class="hljs-keyword">void</span>);
</code></pre>
                    <blockquote>
                      <p>
                        실행 중인 스레드의 스레드 ID를 반환합니다.
                        <code>thread_current()->tid</code>와 동일합니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *<span class="hljs-title">thread_name</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
                    <blockquote>
                      <p>
                        실행 중인 스레드의 이름을 반환합니다.
                        <code>thread_current()->name</code>과 동일합니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_exit</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> NO_RETURN</span>;
</code></pre>
                    <blockquote>
                      <p>
                        <code
                          >현재 스레드를 종료합니다. 반환되지 않습니다.</code
                        >
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_yield</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
                    <blockquote>
                      <p>
                        실행할 새 스레드를 선택하는 스케줄러에 CPU를 넘깁니다.
                        새 스레드는 현재 스레드일 수 있으므로 이 함수에 의존하여
                        특정 시간 동안 이 스레드가 실행되지 않도록 할 수는
                        없습니다.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">thread_get_priority</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_set_priority</span> <span class="hljs-params">(<span class="hljs-keyword">int</span> new_priority)</span></span>;
</code></pre>
                    <blockquote>
                      <p>
                        <a
                          href="https://support.suresofttech.com/ko/support/solutions/articles/5000478109-%EC%8A%A4%ED%85%81-stub-%ED%95%A8%EC%88%98%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94-"
                          >스텁</a
                        >을 사용하여 스레드 우선순위를 설정하고 가져옵니다.
                        <a href="../project1/priority_scheduling"
                          >우선순위 스케줄링</a
                        >을 참조하세요.
                      </p>
                    </blockquote>
                    <hr />
                    <pre><code class="lang-C"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">thread_get_nice</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">thread_set_nice</span> <span class="hljs-params">(<span class="hljs-keyword">int</span> new_nice)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">thread_get_recent_cpu</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">thread_get_load_avg</span> <span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
                    <blockquote>
                      <p>고급 스케줄러용 스텁입니다.</p>
                    </blockquote>
                  </section>
                </div>
                <div class="search-results">
                  <div class="has-results">
                    <h1 class="search-results-title">
                      <span class="search-results-count"></span> results
                      matching "<span class="search-query"></span>"
                    </h1>
                    <ul class="search-results-list"></ul>
                  </div>
                  <div class="no-results">
                    <h1 class="search-results-title">
                      No results matching "<span class="search-query"></span>"
                    </h1>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <a
          href="../project4/FAQ.html"
          class="navigation navigation-prev"
          aria-label="Previous page: FAQ"
        >
          <i class="fa fa-angle-left"></i>
        </a>

        <a
          href="synchronization.html"
          class="navigation navigation-next"
          aria-label="Next page: Synchronization"
        >
          <i class="fa fa-angle-right"></i>
        </a>
      </div>

      <script>
        var gitbook = gitbook || [];
        gitbook.push(function () {
          gitbook.page.hasChanged({
            page: {
              title: "Threads",
              level: "6.1",
              depth: 1,
              next: {
                title: "Synchronization",
                level: "6.2",
                depth: 1,
                path: "appendix/synchronization.md",
                ref: "appendix/synchronization.md",
                articles: [],
              },
              previous: {
                title: "FAQ",
                level: "5.6",
                depth: 1,
                path: "project4/FAQ.md",
                ref: "project4/FAQ.md",
                articles: [],
              },
              dir: "ltr",
            },
            config: {
              gitbook: "*",
              theme: "default",
              variables: {},
              plugins: [],
              pluginsConfig: {
                highlight: {},
                search: {},
                lunr: { maxIndexSize: 1000000, ignoreSpecialCharacters: false },
                sharing: {
                  facebook: true,
                  twitter: true,
                  google: false,
                  weibo: false,
                  instapaper: false,
                  vk: false,
                  all: ["facebook", "google", "twitter", "weibo", "instapaper"],
                },
                fontsettings: { theme: "white", family: "sans", size: 2 },
                "theme-default": {
                  styles: {
                    website: "styles/website.css",
                    pdf: "styles/pdf.css",
                    epub: "styles/epub.css",
                    mobi: "styles/mobi.css",
                    ebook: "styles/ebook.css",
                    print: "styles/print.css",
                  },
                  showLevel: false,
                },
              },
              structure: {
                langs: "LANGS.md",
                readme: "README.md",
                glossary: "GLOSSARY.md",
                summary: "SUMMARY.md",
              },
              pdf: {
                pageNumbers: true,
                fontSize: 12,
                fontFamily: "Arial",
                paperSize: "a4",
                chapterMark: "pagebreak",
                pageBreaksBefore: "/",
                margin: { right: 62, left: 62, top: 56, bottom: 56 },
              },
              styles: {
                website: "styles/website.css",
                pdf: "styles/pdf.css",
                epub: "styles/epub.css",
                mobi: "styles/mobi.css",
                ebook: "styles/ebook.css",
                print: "styles/print.css",
              },
            },
            file: {
              path: "appendix/threads.md",
              mtime: "2022-05-23T14:07:34.228Z",
              type: "markdown",
            },
            gitbook: { version: "3.2.3", time: "2022-05-23T14:13:22.147Z" },
            basePath: "..",
            book: { language: "" },
          });
        });
      </script>
    </div>

    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>

    <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>

    <script src="../gitbook/gitbook-plugin-search/search.js"></script>

    <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>

    <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>

    <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>

    <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
  </body>
</html>
